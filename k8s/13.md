# Kubernetes StatefulSet

## Task 2

### Research and Documentation

#### Output of `kubectl get po,sts,svc,pvc`

```commandLine
kubectl get po,sts,svc,pvc
NAME                                            READY   STATUS    RESTARTS       AGE
pod/app-stateful-0-app-python-0                 1/1     Running   0              3m32s
pod/app-stateful-1-app-python-0                 1/1     Running   0              2m9s

NAME                                         READY   AGE
statefulset.apps/app-stateful-0-app-python   1/1     3m33s
statefulset.apps/app-stateful-1-app-python   1/1     2m10s

NAME                                TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)             AGE
service/app-stateful-0-app-python   LoadBalancer   10.110.151.238   <pending>     5000:31050/TCP      3m33s
service/app-stateful-1-app-python   LoadBalancer   10.104.189.139   <pending>     5000:31539/TCP      2m10s
```

```commandLine
minikube service app-stateful-0-app-python
|-----------|---------------------------|-------------|---------------------------|
| NAMESPACE |           NAME            | TARGET PORT |            URL            |
|-----------|---------------------------|-------------|---------------------------|
| default   | app-stateful-0-app-python | http/5000   | http://192.168.49.2:31050 |
|-----------|---------------------------|-------------|---------------------------|
ðŸŽ‰  Opening service default/app-stateful-0-app-python in default browser...
```

![replica0](./screenshots/replica0.jpg)

```commandLine
minikube service app-stateful-1-app-python
|-----------|---------------------------|-------------|---------------------------|
| NAMESPACE |           NAME            | TARGET PORT |            URL            |
|-----------|---------------------------|-------------|---------------------------|
| default   | app-stateful-1-app-python | http/5000   | http://192.168.49.2:31539 |
|-----------|---------------------------|-------------|---------------------------|
ðŸŽ‰  Opening service default/app-stateful-1-app-python in default browser...
```

![replica1](./screenshots/replica1.jpg)

```commandLine
kubectl exec pod/app-stateful-0-app-python-0 -- cat visits/visits.txt
57
```

```commandLine
kubectl exec pod/app-stateful-1-app-python-0 -- cat visits/visits.txt
42
```

Each replica returns different number of visits due to the fact that each replica maintain its own local state and therefore has its own instance of `counter` variable.

### Ordering Guarantee and Parallel Operations

Ordering guarantees are unnecessary for my app because it's functionality does not rely on the order of requests.
